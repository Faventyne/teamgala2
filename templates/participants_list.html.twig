{% extends "layout.html.twig" %}

{% block title %}
Select participants
{% endblock %}


{% block pagename %}
Select participants
{% endblock %}
{% block username %}
    {{ currentuser.firstname }} {{ currentuser.lastname }}
{% endblock %}

{% block content %}
  <param name="update" value="{{ update }}" id="update">
  <param name="actId" value="{{ actId }}" id="actId">
  <section class="col s10">
    <div class="" style="opacity: 0.00001;">
    aempty div used to circumnavigate the materialise bug which moves the first badge element of the list
    </div>
      {#{{ form_start(form,{'attr': {'class': 'foo'}}) }}#}

    <input type="hidden" name="update" placeholder="{{ update }}">
    {% for participant in participants %}
      <ul class="collection">
        <li class="collection-item">

            {{ participant['firstname']  }}
            {{ participant['lastname'] | upper }}
            <br>
            <br>
              {{participant['position']}}
            <span class="secondary-content" >
              <button style="padding: 0vw;" class="action-button waves-effect waves-light btn" data-participant-id={{ participant['id'] }} {% if update == true %}{%for id in activeId %}{% if participant.id == id %}disabled{% endif %}{% endfor %}{% endif %}>ADD{% if update == true %}{%for id in activeId %}{% if participant.id == id %}ED{% endif %}{% endfor %}{%  endif %}</button>
              <!-- le if sera pour ajoute ou non  -->

            </span>
        </li>
      </ul>
    {% endfor %}
    <ul class="collection">
      <li class="collection-item"></li>
      <br><br> <!-- empt ul to make space for fixed add button -->
    </ul>
<div class="fixed-action-btn">

    {#{{ form_row(form.submit,{'attr': {'class': 'waves-effect waves-light btn-large'}}) }}#}
    {% if update==true %}
        <button type="submit" class="waves-effect waves-light btn-large">MODIFY ACTIVITY</button>
    {% else %}
        <button type="submit" class="waves-effect waves-light btn-large">CREATE ACTIVITY</button>
    {% endif %}

</div>
{#{{ form_end(form) }}#}
</section>

{% endblock %}

{% block javascripts %}
<script src="{{ asset('js/participants.js') }}"></script>
{% endblock %}
